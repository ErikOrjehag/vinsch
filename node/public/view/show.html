<div class="section">
  <div class="container">

    <a href="#!/shows">&lt; Back</a>

    <div class="spacer"></div>

    <div ng-bind="model.show.name"></div>
    <div style="font-style: italic; color: #888;">Created: <span ng-bind="model.show.created | date : 'd MMMM yyyy'"></span></div>

    <div class="spacer"></div>

    <form name="form" novalidate>
      <table class="table is-bordered is-striped is-narrow is-fullwidth">
        <thead>
          <tr>
            <td>Position</td>
            <td>Time</td>
            <td style="width: 50px; text-align: center;">#</td>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="frame in model.show.keyframes track by $index">
            <td>
              <div ng-bind-html="frame.pos | coordinate" class="monospace"></div>
            </td>
            <td style="text-align: right; width: 50px;">
              <input ng-blur="changeTime()" style="width: 50px" type="number" ng-model="frame.time" ng-hide="$index == 0" required="" min="0.1" max="999" step="0.1">
            </td>
            <td class="tooltip-container" ng-mouseenter="onTooltip($index)" ng-mouseleave="offTooltip()">
              <div class="list-index" ng-bind="$index + 1" ng-class="{ 'selected': (model.selected == $index), 'current': (model.current == $index) }"></div>
              <div class="tooltip" ng-show="model.tooltip == $index">
                <div class="tooltip-option" ng-click="gotoKeyframe($index)">Goto</div>
                <div class="tooltip-option" ng-click="addAfter($index)">Add after</div>
                <div class="tooltip-option" ng-click="positionKeyframe($index)">Change position</div>
                <div class="tooltip-option" ng-click="upKeyframe($index)">Move up</div>
                <div class="tooltip-option" ng-click="downKeyframe($index)">Move down</div>
                <div class="tooltip-option" ng-click="deleteKeyframe($index)">Delete</div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </form>

    <div class="button" ng-click="addAfter(model.show.keyframes.length-1)">Add</div>

  </div>
</div>

<!--<pre>{{ prettyModel() }}</pre>-->

<div style="height: 300px"></div>

<div class="bar">
  <div joy-control active="model.control" style="display: inline-block;"></div>
  <div class="button play-stop" ng-click="playShow()" ng-show="!model.playing">Play</div>
  <div class="button play-stop" ng-click="stopShow()" ng-show="model.playing">Stop</div>
  <div class="monospace" ng-bind-html="model.pos | coordinate"></div>
</div>
